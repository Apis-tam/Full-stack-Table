(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[717],{1631:(t,e,s)=>{"use strict";s.d(e,{$:()=>r});let r={url:s(9509).env.NEXT_PUBLIC_API_URL||""}},5041:(t,e,s)=>{"use strict";s.d(e,{n:()=>c});var r=s(2115),n=s(4560),i=s(7165),o=s(5910),a=s(2020),u=class extends o.Q{#t;#e=void 0;#s;#r;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,a.f8)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,a.EN)(e.mutationKey)!==(0,a.EN)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#i()}mutate(t,e){return this.#r=e,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(t)}#n(){let t=this.#s?.state??(0,n.$)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#i(t){i.jG.batch(()=>{if(this.#r&&this.hasListeners()){let e=this.#e.variables,s=this.#e.context;t?.type==="success"?(this.#r.onSuccess?.(t.data,e,s),this.#r.onSettled?.(t.data,null,e,s)):t?.type==="error"&&(this.#r.onError?.(t.error,e,s),this.#r.onSettled?.(void 0,t.error,e,s))}this.listeners.forEach(t=>{t(this.#e)})})}},l=s(6715);function c(t,e){let s=(0,l.jE)(e),[n]=r.useState(()=>new u(s,t));r.useEffect(()=>{n.setOptions(t)},[n,t]);let o=r.useSyncExternalStore(r.useCallback(t=>n.subscribe(i.jG.batchCalls(t)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),c=r.useCallback((t,e)=>{n.mutate(t,e).catch(a.lQ)},[n]);if(o.error&&(0,a.GU)(n.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:c,mutateAsync:o.mutate}}},7457:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>m});var r=s(5155),n=s(7017),i=s(6715),o=s(5041),a=s(2115),u=s(1631);let l=async t=>{try{return(await fetch("".concat(u.$.url,"/auth/create"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(t){throw console.error(t),Error(t.message)}},c=async t=>{try{return(await fetch("".concat(u.$.url,"/auth"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(t){throw console.error(t),Error(t.message)}};var d=s(8999);let h=()=>{let{formAction:t,requeredFields:e,setActiveTab:s,activeTab:n}=(()=>{let t=(0,d.useRouter)(),[e,s]=(0,a.useState)("signin"),[r,n]=(0,a.useState)({userName:!0,email:!0,password:!0}),i=(0,o.n)({mutationFn:function(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];return l(...e)},onSuccess:t=>{localStorage.setItem("accessToken",t.data.accessToken)}}),u=(0,o.n)({mutationFn:function(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];return c(...e)},onSuccess:e=>{localStorage.setItem("accessToken",e.data.accessToken),"success"===e.status&&t.push("/")}}),[h,m,p]=(0,a.useActionState)((t,s)=>{var r,o,a;let l={userName:null==(r=s.get("userName"))?void 0:r.toString(),email:null==(o=s.get("email"))?void 0:o.toString(),password:null==(a=s.get("password"))?void 0:a.toString()};return n(l),"signin"===e&&l.email&&l.password&&u.mutate({email:l.email,password:l.password}),l.email&&l.password&&l.userName&&i.mutate({email:l.email,password:l.password,userName:l.userName}),t},{email:"",password:"",userName:""});return{state:h,formAction:m,isPending:p,requeredFields:r,setActiveTab:s,activeTab:e}})(),i=t=>{s(t)};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center relative bg-gray-100",children:(0,r.jsxs)("div",{className:"bg-black p-8 rounded-lg shadow-lg w-full max-w-md absolute top-40",children:[(0,r.jsxs)("div",{className:"flex mb-6",children:[(0,r.jsx)("button",{className:"flex-1 py-2 text-center text-lg font-semibold border-b-2 ".concat("signin"===n?" border-blue-500 text-blue-500":"text-gray-500"," hover:border-blue-300"),onClick:()=>i("signin"),children:"Sign In"}),(0,r.jsx)("button",{className:"flex-1 py-2 border-b-2 text-center text-lg font-semibold ".concat("signup"===n?" border-blue-500 text-blue-500":"text-gray-500"," hover:border-blue-300"),onClick:()=>i("signup"),children:"Sign Up"})]}),(0,r.jsxs)("form",{action:t,children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"signup"===n?"Sign up":"Sign In"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,r.jsx)("input",{autoComplete:"email",name:"email",type:"email",className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(!(null==e?void 0:e.email)&&" border-red-600"),placeholder:"Enter your email"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,r.jsx)("input",{autoComplete:"current-password",name:"password",type:"password",className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(!(null==e?void 0:e.password)&&" border-red-600"),placeholder:"Enter your password"})]}),"signup"===n&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,r.jsx)("input",{autoComplete:"username",name:"userName",type:"text",className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ".concat(!(null==e?void 0:e.userName)&&" border-red-600"),placeholder:"Enter your username"})]}),(0,r.jsx)("button",{type:"submit",className:"w-full py-2 px-4 bg-blue-500 text-white font-semibold rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"signup"===n?"Sign Up":"Sign In"})]})]})]})})};function m(){let t=new n.E;return(0,r.jsx)(i.Ht,{client:t,children:(0,r.jsx)(h,{})})}},7550:(t,e,s)=>{Promise.resolve().then(s.bind(s,7457))}},t=>{t.O(0,[123,441,964,358],()=>t(t.s=7550)),_N_E=t.O()}]);